import{s as W,B as ue,f as B,g as N,h as V,d as h,j as E,k as me,i as I,C as pe,D as he,E as de,o as ie,b as _e,p as ge,v as G,w as J,x as L,u as z,z as ve,A as K,O as be,a as H,c as S,e as O,F as we,M as X,N as Y,l as Z,m as ee,n as ce,y as ye,r as ke,L as Ie}from"../chunks/scheduler.526307f2.js";import{S as q,i as F,a as k,t as C,b as j,d as A,m as P,e as T,g as re,c as le}from"../chunks/index.cddfbdc7.js";import{e as $e}from"../chunks/each.e59479a4.js";import{H as Ce}from"../chunks/H1.8e875142.js";import{f as U}from"../chunks/store.916c82b8.js";import{L as Ee}from"../chunks/LoadingCircle.2e9fa118.js";import{s as Le}from"../chunks/styles.eedd47e4.js";import{h as x,k as _,n as a,s as b,f as n,d as w,i as D,a as De,t as M,g as y}from"../chunks/highlighter.365a0e63.js";import{C as Ve}from"../chunks/ComponentTabView.2c6cdd27.js";import{C as Q}from"../chunks/CodePage.93f49b6b.js";import{I as fe}from"../chunks/IdeTypescript.13b6fe6f.js";function xe(c){let t,s;const e=c[5].default,r=ue(e,c,c[4],null);return{c(){t=B("div"),r&&r.c(),this.h()},l(l){t=N(l,"DIV",{class:!0,style:!0});var o=V(t);r&&r.l(o),o.forEach(h),this.h()},h(){E(t,"class",c[0]),me(t,"overflow","auto")},m(l,o){I(l,t,o),r&&r.m(t,null),c[6](t),s=!0},p(l,[o]){r&&r.p&&(!s||o&16)&&pe(r,e,l,l[4],s?de(e,l[4],o,null):he(l[4]),null),(!s||o&1)&&E(t,"class",l[0])},i(l){s||(k(r,l),s=!0)},o(l){C(r,l),s=!1},d(l){l&&h(t),r&&r.d(l),c[6](null)}}}function Me(c,t,s){let{$$slots:e={},$$scope:r}=t,{classs:l=""}=t,{ready:o}=t,{onlast:$}=t,f,v;ie(()=>{v=new IntersectionObserver(d=>{d[0].isIntersecting&&(v.unobserve(d[0].target),$())},{root:f,threshold:0})}),_e(()=>{o&&f.lastElementChild&&v.observe(f.lastElementChild)});function m(d){ge[d?"unshift":"push"](()=>{f=d,s(1,f)})}return c.$$set=d=>{"classs"in d&&s(0,l=d.classs),"ready"in d&&s(2,o=d.ready),"onlast"in d&&s(3,$=d.onlast),"$$scope"in d&&s(4,r=d.$$scope)},[l,f,o,$,r,e,m]}class He extends q{constructor(t){super(),F(this,t,Me,xe,W,{classs:0,ready:2,onlast:3})}}function Se(c){let t,s,e,r;return{c(){t=B("div"),s=G("svg"),e=G("path"),r=G("path"),this.h()},l(l){t=N(l,"DIV",{class:!0});var o=V(t);s=J(o,"svg",{xmlns:!0,viewBox:!0});var $=V(s);e=J($,"path",{d:!0}),V(e).forEach(h),r=J($,"path",{d:!0,fill:!0}),V(r).forEach(h),$.forEach(h),o.forEach(h),this.h()},h(){E(e,"d","M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"),E(r,"d","M0 0h24v24H0z"),E(r,"fill","none"),E(s,"xmlns","http://www.w3.org/2000/svg"),E(s,"viewBox","0 0 24 24"),E(t,"class",c[0])},m(l,o){I(l,t,o),L(t,s),L(s,e),L(s,r)},p(l,[o]){o&1&&E(t,"class",l[0])},i:z,o:z,d(l){l&&h(t)}}}function je(c,t,s){let{classs:e=""}=t;return c.$$set=r=>{"classs"in r&&s(0,e=r.classs)},[e]}class Ae extends q{constructor(t){super(),F(this,t,je,Se,W,{classs:0})}}function ae(c,t,s){const e=c.slice();return e[7]=t[s],e}function Pe(c){let t=c[7].title+"",s;return{c(){s=Z(t)},l(e){s=ee(e,t)},m(e,r){I(e,s,r)},p(e,r){r&2&&t!==(t=e[7].title+"")&&ce(s,t)},d(e){e&&h(s)}}}function oe(c){let t,s,e,r,l=c[7].content+"",o,$;return s=new Ce({props:{$$slots:{default:[Pe]},$$scope:{ctx:c}}}),{c(){t=B("div"),j(s.$$.fragment),e=H(),r=B("span"),o=Z(l)},l(f){t=N(f,"DIV",{});var v=V(t);A(s.$$.fragment,v),e=S(v),r=N(v,"SPAN",{});var m=V(r);o=ee(m,l),m.forEach(h),v.forEach(h)},m(f,v){I(f,t,v),P(s,t,null),L(t,e),L(t,r),L(r,o),$=!0},p(f,v){const m={};v&1026&&(m.$$scope={dirty:v,ctx:f}),s.$set(m),(!$||v&2)&&l!==(l=f[7].content+"")&&ce(o,l)},i(f){$||(k(s.$$.fragment,f),$=!0)},o(f){C(s.$$.fragment,f),$=!1},d(f){f&&h(t),T(s)}}}function Te(c){let t,s,e,r,l,o="server error",$,f,v;return e=new Ae({props:{classs:"f=#88888888"}}),{c(){t=B("div"),s=B("div"),j(e.$$.fragment),r=H(),l=B("button"),l.textContent=o,this.h()},l(m){t=N(m,"DIV",{class:!0});var d=V(t);s=N(d,"DIV",{class:!0});var i=V(s);A(e.$$.fragment,i),i.forEach(h),r=S(d),l=N(d,"BUTTON",{class:!0,"data-svelte-h":!0}),ye(l)!=="svelte-1assxk0"&&(l.textContent=o),d.forEach(h),this.h()},h(){E(s,"class","w=6 absolute"),E(l,"class","absolute fs=1.5 bold"),E(t,"class","relative flex h=6.5 jc=center ai=center")},m(m,d){I(m,t,d),L(t,s),P(e,s,null),L(t,r),L(t,l),$=!0,f||(v=ke(l,"click",c[5]),f=!0)},p:z,i(m){$||(k(e.$$.fragment,m),$=!0)},o(m){C(e.$$.fragment,m),$=!1},d(m){m&&h(t),T(e),f=!1,v()}}}function Be(c){let t,s,e;return s=new Ee({}),{c(){t=B("div"),j(s.$$.fragment),this.h()},l(r){t=N(r,"DIV",{class:!0});var l=V(t);A(s.$$.fragment,l),l.forEach(h),this.h()},h(){E(t,"class","flex h=6.5 jc=center")},m(r,l){I(r,t,l),P(s,t,null),e=!0},p:z,i(r){e||(k(s.$$.fragment,r),e=!0)},o(r){C(s.$$.fragment,r),e=!1},d(r){r&&h(t),T(s)}}}function Ne(c){let t,s,e,r,l,o=$e(c[1]),$=[];for(let i=0;i<o.length;i+=1)$[i]=oe(ae(c,o,i));const f=i=>C($[i],1,1,()=>{$[i]=null}),v=[Be,Te],m=[];function d(i,g){return i[0]?i[0]===2?1:-1:0}return~(s=d(c))&&(e=m[s]=v[s](c)),{c(){for(let i=0;i<$.length;i+=1)$[i].c();t=H(),e&&e.c(),r=O()},l(i){for(let g=0;g<$.length;g+=1)$[g].l(i);t=S(i),e&&e.l(i),r=O()},m(i,g){for(let p=0;p<$.length;p+=1)$[p]&&$[p].m(i,g);I(i,t,g),~s&&m[s].m(i,g),I(i,r,g),l=!0},p(i,g){if(g&2){o=$e(i[1]);let u;for(u=0;u<o.length;u+=1){const R=ae(i,o,u);$[u]?($[u].p(R,g),k($[u],1)):($[u]=oe(R),$[u].c(),k($[u],1),$[u].m(t.parentNode,t))}for(re(),u=o.length;u<$.length;u+=1)f(u);le()}let p=s;s=d(i),s===p?~s&&m[s].p(i,g):(e&&(re(),C(m[p],1,1,()=>{m[p]=null}),le()),~s?(e=m[s],e?e.p(i,g):(e=m[s]=v[s](i),e.c()),k(e,1),e.m(r.parentNode,r)):e=null)},i(i){if(!l){for(let g=0;g<o.length;g+=1)k($[g]);k(e),l=!0}},o(i){$=$.filter(Boolean);for(let g=0;g<$.length;g+=1)C($[g]);C(e),l=!1},d(i){i&&(h(t),h(r)),we($,i),~s&&m[s].d(i)}}}function ze(c){let t,s;return{c(){t=new X(!1),s=O(),this.h()},l(e){t=Y(e,!1),s=O(),this.h()},h(){t.a=s},m(e,r){t.m(c[2],e,r),I(e,s,r)},p:z,d(e){e&&(h(s),t.d())}}}function Oe(c){let t,s,e,r,l;return t=new fe({props:{name:"store"}}),{c(){j(t.$$.fragment),s=H(),e=new X(!1),r=O(),this.h()},l(o){A(t.$$.fragment,o),s=S(o),e=Y(o,!1),r=O(),this.h()},h(){e.a=r},m(o,$){P(t,o,$),I(o,s,$),e.m(c[3],o,$),I(o,r,$),l=!0},p:z,i(o){l||(k(t.$$.fragment,o),l=!0)},o(o){C(t.$$.fragment,o),l=!1},d(o){o&&(h(s),h(r),e.d()),T(t,o)}}}function Re(c){let t,s,e,r,l,o;return s=new fe({props:{name:"index"}}),{c(){t=Z("styles / "),j(s.$$.fragment),e=H(),r=new X(!1),l=O(),this.h()},l($){t=ee($,"styles / "),A(s.$$.fragment,$),e=S($),r=Y($,!1),l=O(),this.h()},h(){r.a=l},m($,f){I($,t,f),P(s,$,f),I($,e,f),r.m(c[4],$,f),I($,l,f),o=!0},p:z,i($){o||(k(s.$$.fragment,$),o=!0)},o($){C(s.$$.fragment,$),o=!1},d($){$&&(h(t),h(e),h(l),r.d()),T(s,$)}}}function Ue(c){let t,s,e,r,l,o,$,f,v,m,d,i,g;return t=new He({props:{classs:"bd=1px_solid_black xh=15 p=1 "+Le.scrollbar.primary,onlast:c[5],ready:c[0]===1,$$slots:{default:[Ne]},$$scope:{ctx:c}}}),r=new Q({props:{isCode:!0,$$slots:{default:[ze]},$$scope:{ctx:c}}}),f=new Q({props:{isCode:!0,$$slots:{default:[Oe]},$$scope:{ctx:c}}}),i=new Q({props:{isCode:!0,$$slots:{default:[Re]},$$scope:{ctx:c}}}),{c(){j(t.$$.fragment),s=H(),e=B("div"),j(r.$$.fragment),l=H(),o=B("div"),$=H(),j(f.$$.fragment),v=H(),m=B("div"),d=H(),j(i.$$.fragment),this.h()},l(p){A(t.$$.fragment,p),s=S(p),e=N(p,"DIV",{});var u=V(e);A(r.$$.fragment,u),l=S(u),o=N(u,"DIV",{class:!0}),V(o).forEach(h),$=S(u),A(f.$$.fragment,u),v=S(u),m=N(u,"DIV",{class:!0}),V(m).forEach(h),d=S(u),A(i.$$.fragment,u),u.forEach(h),this.h()},h(){E(o,"class","h=1"),E(m,"class","h=1")},m(p,u){P(t,p,u),I(p,s,u),I(p,e,u),P(r,e,null),L(e,l),L(e,o),L(e,$),P(f,e,null),L(e,v),L(e,m),L(e,d),P(i,e,null),g=!0},p(p,u){const R={};u&1&&(R.ready=p[0]===1),u&1027&&(R.$$scope={dirty:u,ctx:p}),t.$set(R);const te={};u&1024&&(te.$$scope={dirty:u,ctx:p}),r.$set(te);const se={};u&1024&&(se.$$scope={dirty:u,ctx:p}),f.$set(se);const ne={};u&1024&&(ne.$$scope={dirty:u,ctx:p}),i.$set(ne)},i(p){g||(k(t.$$.fragment,p),k(r.$$.fragment,p),k(f.$$.fragment,p),k(i.$$.fragment,p),g=!0)},o(p){C(t.$$.fragment,p),C(r.$$.fragment,p),C(f.$$.fragment,p),C(i.$$.fragment,p),g=!1},d(p){p&&(h(s),h(e)),T(t,p),T(r),T(f),T(i)}}}function We(c){let t,s;return t=new Ve({props:{$$slots:{default:[Ue]},$$scope:{ctx:c}}}),{c(){j(t.$$.fragment)},l(e){A(t.$$.fragment,e)},m(e,r){P(t,e,r),s=!0},p(e,[r]){const l={};r&1027&&(l.$$scope={dirty:r,ctx:e}),t.$set(l)},i(e){s||(k(t.$$.fragment,e),s=!0)},o(e){C(t.$$.fragment,e),s=!1},d(e){T(t,e)}}}function qe(c,t,s){let e;ve(c,U,m=>s(1,e=m));const r=`${x("script",` ${a("lang")}=${b("ts")}`,`
${_("import")} ${a("H1")} ${_("from")} ${b("cells/typography/H1.svelte")}
${_("import")} ${a("IRefresh")} ${_("from")} ${b("cells/svgs/i_refresh.svelte")}
${_("import")} ${a("LoadingCircle")} ${_("from")} ${b("src/instant-ui/animations/LoadingCircle.svelte")}
${_("import")} ${a("styles")} ${_("from")} ${b("src/styles")}
${_("import")} ${n("{")} ${a("contents$")} ${n("}")} ${_("from")} ${b("parts/ref/store")}
${_("import")} ${n("{")} ${a("onDestroy")}, ${a("onMount")} ${n("}")} ${_("from")} ${b("svelte")}
${_("import")} ${n("{")} ${a("InfiniteScroll")} ${n("}")} ${_("from")} ${b("lube-ui")}

${w("let")} ${a("loading")} = ${D(1)} ${De("// 0: in progress, 1: none, 2: error")}
${w("const")} ${a("loremApi",!0)}: ${n("(")}${a("i")}: ${M("number")}, ${a("n")}: ${M("number")}${n(")")} ${w("=>")} ${M("Promise")}${n("<")}${M("any")}${n(">")} = ${n("(")}${a("i")}: ${M("number")}, ${a("n")}: ${M("number")}${n(")")} ${w("=>")} ${w("new")} ${M("Promise")}${n("(")}${n("(",1)}${y("resolve")}, ${y("reject")}${n(")",1)} ${w("=>")} ${y("setTimeout")}${n("(",1)}${n("()",2)} ${w("=>")} ${n("{",2)}
	${w("const")} ${a("r",!0)} = ${a("Math")}.${y("random")}${n("()")}
	${_("if")} ${n("(")}${a("i")} && ${a("r",!0)} < ${D(.3)}${n(") {")}
		${y("reject")}${n("(",1)}${b("`error:",!1)} ${w("${")}${a("r",!0)}${w("}")} ${b("< 0.3`",!1)}${n(")",1)}
	${n("}")} ${_("else")} ${n("{")}
		${w("const")} ${a("contents",!0)} = ${n("[]",1)}
		${_("while")} ${n("(",1)}${a("n")}-- > ${D(0)}${n(") {",1)}
			${a("contents",!0)}.${y("push")}${n("(",2)}${n("{")} ${a("title:")} ${b("title ")} + ++${a("i")}, ${a("content:")} ${b("Lorem Ipsum is . . . . . . of Lorem Ipsum.")} ${n("}")}${n(")",2)}
		${n("}",1)}
		${y("resolve")}${n("(",1)}${a("contents",!0)}${n(")",1)}
	${n("}",0)}
${n("}",2)}, ${a("i")} ? ${D(600)} : ${D(0)}${n(")",1)}${n(")")}
${w("const")} ${y("loadContents")} = ${n("()")} ${w("=>")} ${n("{")}
	${_("if")} ${n("(",1)}${a("loading")}${n(") {",1)}
		${a("loading")} = ${D(0)}
		${a("loremApi",!0)}.${y("promise")}${n("(",2)}${a("$contents$")}.${a("length")}, ${D(5)}${n(")",2)}
			.${y("set")}${n("(",2)}${a("value")} ${w("=>")} ${n("{")}
				${a("$contents$")} = ${a("$contents$")}.${y("concat")}${n("(",1)}${a("value")}${n(")",1)}
				${a("loading")} = ${D(1)}
			${n("}")}${n(")",2)}
			.${y("catch")}${n("(",2)}${n("()")} ${w("=>")} ${a("loading")} = ${D(2)}${n(")",2)}
	${n("}",1)}
${n("}")}
${y("onMount")}${n("(")}${n("()",1)} ${w("=>")} ${a("loremApi",!0)}.${y("promise")}${n("(",1)}${D(0)}, ${D(10)}${n(")",1)}.${y("then")}${n("(",1)}${a("value")} ${w("=>")} ${a("$contents$")} = ${a("value")}${n(")",1)}${n(")")}
${y("onDestroy")}${n("(")}${n("()",1)} ${w("=>")} ${a("$contents$")} = ${n("[]",1)}${n(")")}
`)}

${x("InfiniteScroll",` ${a("classs")}=${b('"bd=1px_solid_black xh=15 p=1',!1)} ${n("{",2)}${a("styles")}.${a("scrollbar")}.${a("primary")}${n("}",2)}${b('"',!1)}
		${a("onlast")}=${n("{")}${y("loadContents")}${n("}")}
		${a("ready")}=${n("{")}${a("loading")} === ${D(1)}${n("}")}`,`
	${n("{")}#${_("each")} ${a("$contents$")} ${_("as")} ${a("c")}${n("}")}
		${x("div","",`
			${x("H1","",`${n("{")}${a("c")}.${a("title")}${n("}")}`)}
			${x("span","",`${n("{")}${a("c")}.${a("content")}${n("}")}`)}
		`)}
	${n("{")}/${_("each")}${n("}")}
	${n("{")}#${_("if")} !${a("loading")}${n("}")}
		${x("div",` ${a("class")}=${b("flex h=6.5 jc=center")}`,`
			${x("LoadingCircle","",!1)}
		`)}
	${n("{")}:${_("else if")} ${a("loading")} === ${D(2)}${n("}")}
		${x("div",` ${a("class")}=${b("relative flex h=6.5 jc=center ai=center")}`,`
			${x("div",` ${a("class")}=${b("w=6 absolute")}`,`
				${x("IRefresh",` ${a("classs")}=${b("f=#88888888")}`,!1)}
			`)}
			${x("button",` ${a("class")}=${b("absolute fs=1.5 bold")} ${_("on")}:${M("click")}=${n("{")}${y("loadContents")}${n("}")}`,"server error")}
		`)}
	${n("{")}/${_("if")}${n("}")}
`)}`,l=`

${_("import")} ${n("{")} ${a("writable")}, ${_("type")} ${a("Writable")} ${n("}")} ${_("from")} ${b("svelte/store")}

${_("export")} ${w("const")} ${a("contents$",!0)}: ${M("Writable")}${n("<")}${n("{",1)} ${a("title")}: ${M("string")}, ${a("content")}: ${M("string")} ${n("}[]",1)}${n(")")} = ${y("writable")}${n("(")}${n("[]",1)}${n(")")}`,o=`

${_("export default")} ${n("{")}
	${a("scrollbar:")} ${n("{",1)}
		${a("primary:")} ${b("::-webkit-scrollbar/w=.5 ::-webkit-scrollbar-track/bg=--primary-55 ::-webkit-scrollbar-thumb/bg=--primary;br=.25")}
	${n("}",1)}
${n("}")}`;let $=1;const f=(m,d)=>new Promise((i,g)=>setTimeout(()=>{const p=Math.random();if(m&&p<.3)g(`error: ${p} < 0.3`);else{const u=[];for(;d-- >0;)u.push({title:"title "+ ++m,content:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."});i(u)}},m?600:0)),v=()=>{$&&(s(0,$=0),f(e.length,5).then(m=>{K(U,e=e.concat(m),e),s(0,$=1)}).catch(()=>s(0,$=2)))};return ie(()=>f(0,10).then(m=>K(U,e=m,e))),be(()=>K(U,e=[],e)),[$,e,r,l,o,v]}class Fe extends q{constructor(t){super(),F(this,t,qe,We,W,{})}}function Ge(c){let t,s,e;return s=new Fe({}),{c(){t=H(),j(s.$$.fragment),this.h()},l(r){Ie("svelte-120ri7c",document.head).forEach(h),t=S(r),A(s.$$.fragment,r),this.h()},h(){document.title="Infinite Scroll | Reference"},m(r,l){I(r,t,l),P(s,r,l),e=!0},p:z,i(r){e||(k(s.$$.fragment,r),e=!0)},o(r){C(s.$$.fragment,r),e=!1},d(r){r&&h(t),T(s,r)}}}class lt extends q{constructor(t){super(),F(this,t,null,Ge,W,{})}}export{lt as component};
