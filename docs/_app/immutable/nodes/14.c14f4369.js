import{s as le,z as Ee,f as y,g as I,h as V,d as m,j as x,k as Ce,i as _,A as De,B as Le,C as Ve,o as ue,b as xe,p as ke,a as S,c as j,M as me,e as R,N as de,u as G,l as Y,m as Z,x as Se,y as ae,P as je,D as Te,w as L,n as ye,v as ie,r as He,O as Me}from"../chunks/scheduler.751e6dae.js";import{S as $e,i as re,a as C,t as D,b as M,d as P,m as A,e as N,g as he,c as ge}from"../chunks/index.91d8d602.js";import{H as ce}from"../chunks/H2.cb186f28.js";import{e as ve}from"../chunks/each.e59479a4.js";import{I as Ie,f as ne}from"../chunks/IdeTypescript.36cff289.js";import{L as Pe}from"../chunks/LoadingCircle.f64c62e8.js";import{s as fe}from"../chunks/styles.b585f6af.js";import{C as Ae}from"../chunks/ComponentTabView.dd39602d.js";import{C as oe,h as O,k as b,n as o,s as k,b as l,g as w,d as H,a as Ne,t as U,f as E}from"../chunks/highlighter.f351b14a.js";import{b as Be}from"../chunks/paths.1ac93f45.js";function Oe(f){let e,t;const s=f[5].default,$=Ee(s,f,f[4],null);return{c(){e=y("div"),$&&$.c(),this.h()},l(r){e=I(r,"DIV",{class:!0,style:!0});var a=V(e);$&&$.l(a),a.forEach(m),this.h()},h(){x(e,"class",f[0]),Ce(e,"overflow","auto")},m(r,a){_(r,e,a),$&&$.m(e,null),f[6](e),t=!0},p(r,[a]){$&&$.p&&(!t||a&16)&&De($,s,r,r[4],t?Ve(s,r[4],a,null):Le(r[4]),null),(!t||a&1)&&x(e,"class",r[0])},i(r){t||(C($,r),t=!0)},o(r){D($,r),t=!1},d(r){r&&m(e),$&&$.d(r),f[6](null)}}}function Ue(f,e,t){let{$$slots:s={},$$scope:$}=e,{classs:r=""}=e,{ready:a}=e,{onlast:n}=e,u,p;ue(()=>{p=new IntersectionObserver(c=>{c[0].isIntersecting&&(p.unobserve(c[0].target),n())},{root:u,threshold:0})}),xe(()=>{a&&u.lastElementChild&&p.observe(u.lastElementChild)});function d(c){ke[c?"unshift":"push"](()=>{u=c,t(1,u)})}return f.$$set=c=>{"classs"in c&&t(0,r=c.classs),"ready"in c&&t(2,a=c.ready),"onlast"in c&&t(3,n=c.onlast),"$$scope"in c&&t(4,$=c.$$scope)},[r,u,a,n,$,s,d]}class qe extends $e{constructor(e){super(),re(this,e,Ue,Oe,le,{classs:0,ready:2,onlast:3})}}function Re(f){let e,t;return{c(){e=new me(!1),t=R(),this.h()},l(s){e=de(s,!1),t=R(),this.h()},h(){e.a=t},m(s,$){e.m(f[0],s,$),_(s,t,$)},p:G,d(s){s&&(m(t),e.d())}}}function We(f){let e,t,s,$,r;return e=new Ie({props:{name:"store"}}),{c(){M(e.$$.fragment),t=S(),s=new me(!1),$=R(),this.h()},l(a){P(e.$$.fragment,a),t=j(a),s=de(a,!1),$=R(),this.h()},h(){s.a=$},m(a,n){A(e,a,n),_(a,t,n),s.m(f[1],a,n),_(a,$,n),r=!0},p:G,i(a){r||(C(e.$$.fragment,a),r=!0)},o(a){D(e.$$.fragment,a),r=!1},d(a){a&&(m(t),m($),s.d()),N(e,a)}}}function ze(f){let e,t,s,$,r,a;return t=new Ie({props:{name:"styles"}}),{c(){e=Y("ts / "),M(t.$$.fragment),s=S(),$=new me(!1),r=R(),this.h()},l(n){e=Z(n,"ts / "),P(t.$$.fragment,n),s=j(n),$=de(n,!1),r=R(),this.h()},h(){$.a=r},m(n,u){_(n,e,u),A(t,n,u),_(n,s,u),$.m(f[2],n,u),_(n,r,u),a=!0},p:G,i(n){a||(C(t.$$.fragment,n),a=!0)},o(n){D(t.$$.fragment,n),a=!1},d(n){n&&(m(e),m(s),m(r),$.d()),N(t,n)}}}function Fe(f){let e,t,s,$,r,a,n,u,p,d;return e=new oe({props:{is_code:!0,$$slots:{default:[Re]},$$scope:{ctx:f}}}),r=new oe({props:{is_code:!0,$$slots:{default:[We]},$$scope:{ctx:f}}}),p=new oe({props:{is_code:!0,$$slots:{default:[ze]},$$scope:{ctx:f}}}),{c(){M(e.$$.fragment),t=S(),s=y("div"),$=S(),M(r.$$.fragment),a=S(),n=y("div"),u=S(),M(p.$$.fragment),this.h()},l(c){P(e.$$.fragment,c),t=j(c),s=I(c,"DIV",{class:!0}),V(s).forEach(m),$=j(c),P(r.$$.fragment,c),a=j(c),n=I(c,"DIV",{class:!0}),V(n).forEach(m),u=j(c),P(p.$$.fragment,c),this.h()},h(){x(s,"class","h=1"),x(n,"class","h=1")},m(c,i){A(e,c,i),_(c,t,i),_(c,s,i),_(c,$,i),A(r,c,i),_(c,a,i),_(c,n,i),_(c,u,i),A(p,c,i),d=!0},p(c,[i]){const h={};i&8&&(h.$$scope={dirty:i,ctx:c}),e.$set(h);const T={};i&8&&(T.$$scope={dirty:i,ctx:c}),r.$set(T);const g={};i&8&&(g.$$scope={dirty:i,ctx:c}),p.$set(g)},i(c){d||(C(e.$$.fragment,c),C(r.$$.fragment,c),C(p.$$.fragment,c),d=!0)},o(c){D(e.$$.fragment,c),D(r.$$.fragment,c),D(p.$$.fragment,c),d=!1},d(c){c&&(m(t),m(s),m($),m(a),m(n),m(u)),N(e,c),N(r,c),N(p,c)}}}function Ge(f){const e=`${O("script",` ${o("lang")}=${k("ts")}`,`
${b("import")} ${o("LoadingCircle")} ${b("from")} ${k("src/instant-ui/animations/LoadingCircle.svelte")}
${b("import")} ${o("styles")} ${b("from")} ${k("js/styles.js")}
${b("import")} ${l("{")} ${o("contents$")} ${l("}")} ${b("from")} ${k("parts/ref/store")}
${b("import")} ${l("{")} ${o("onDestroy")}, ${o("onMount")} ${l("}")} ${b("from")} ${k("svelte")}
${b("import")} ${l("{")} ${o("H2")}, ${o("InfiniteScroll")} ${l("}")} ${b("from")} ${k("lube-ui")}

${w("let")} ${o("loading")} = ${H(1)} ${Ne("// 0: in progress, 1: none, 2: error")}
${w("const")} ${o("lorem_api",!0)}: ${l("(")}${o("i")}: ${U("number")}, ${o("n")}: ${U("number")}${l(")")} ${w("=>")} ${U("Promise")}${l("<")}${U("any")}${l(">")} = ${l("(")}${o("i")}: ${U("number")}, ${o("n")}: ${U("number")}${l(")")} ${w("=>")} ${w("new")} ${U("Promise")}${l("(")}${l("(",1)}${E("resolve")}, ${E("reject")}${l(")",1)} ${w("=>")} ${E("setTimeout")}${l("(",1)}${l("()",2)} ${w("=>")} ${l("{",2)}
	${w("const")} ${o("r",!0)} = ${o("Math")}.${E("random")}${l("()")}
	${b("if")} ${l("(")}${o("i")} && ${o("r",!0)} < ${H(.3)}${l(") {")}
		${E("reject")}${l("(",1)}${k("`error:",!1)} ${w("${")}${o("r",!0)}${w("}")} ${k("< 0.3`",!1)}${l(")",1)}
	${l("}")} ${b("else")} ${l("{")}
		${w("const")} ${o("contents",!0)} = ${l("[]",1)}
		${b("while")} ${l("(",1)}${o("n")}-- > ${H(0)}${l(") {",1)}
			${o("contents",!0)}.${E("push")}${l("(",2)}${l("{")} ${o("title:")} ${k("title ")} + ++${o("i")}, ${o("content:")} ${k("Lorem Ipsum is . . . . . . of Lorem Ipsum.")} ${l("}")}${l(")",2)}
		${l("}",1)}
		${E("resolve")}${l("(",1)}${o("contents",!0)}${l(")",1)}
	${l("}",0)}
${l("}",2)}, ${o("i")} ? ${H(600)} : ${H(0)}${l(")",1)}${l(")")}
${w("const")} ${E("load_contents")} = ${l("()")} ${w("=>")} ${l("{")}
	${b("if")} ${l("(",1)}${o("loading")}${l(") {",1)}
		${o("loading")} = ${H(0)}
		${o("lorem_api",!0)}.${E("promise")}${l("(",2)}${o("$contents$")}.${o("length")}, ${H(5)}${l(")",2)}
			.${E("set")}${l("(",2)}${o("value")} ${w("=>")} ${l("{")}
				${o("$contents$")} = ${o("$contents$")}.${E("concat")}${l("(",1)}${o("value")}${l(")",1)}
				${o("loading")} = ${H(1)}
			${l("}")}${l(")",2)}
			.${E("catch")}${l("(",2)}${l("()")} ${w("=>")} ${o("loading")} = ${H(2)}${l(")",2)}
	${l("}",1)}
${l("}")}
${E("onMount")}${l("(")}${l("()",1)} ${w("=>")} ${o("lorem_api",!0)}.${E("promise")}${l("(",1)}${H(0)}, ${H(10)}${l(")",1)}.${E("then")}${l("(",1)}${o("value")} ${w("=>")} ${o("$contents$")} = ${o("value")}${l(")",1)}${l(")")}
${E("onDestroy")}${l("(")}${l("()",1)} ${w("=>")} ${o("$contents$")} = ${l("[]",1)}${l(")")}
`)}

${O("InfiniteScroll",` ${o("classs")}=${k('"bd=1px_solid_black xh=15 p=1',!1)} ${l("{",2)}${o("styles")}.${o("scrollbar")}.${o("primary")}${l("}",2)}${k('"',!1)}
		${o("onlast")}=${l("{")}${E("load_contents")}${l("}")}
		${o("ready")}=${l("{")}${o("loading")} === ${H(1)}${l("}")}`,`
	${l("{")}#${b("each")} ${o("$contents$")} ${b("as")} ${o("c")}${l("}")}
		${O("div","",`
			${O("H1","",`${l("{")}${o("c")}.${o("title")}${l("}")}`)}
			${O("span","",`${l("{")}${o("c")}.${o("content")}${l("}")}`)}
		`)}
	${l("{")}/${b("each")}${l("}")}
	${l("{")}#${b("if")} !${o("loading")}${l("}")}
		${O("div",` ${o("class")}=${k("flex h=6.5 jc=center")}`,`
			${O("LoadingCircle","",!1)}
		`)}
	${l("{")}:${b("else if")} ${o("loading")} === ${H(2)}${l("}")}
		${O("div",` ${o("class")}=${k("relative flex h=6.5 jc=center ai=center")}`,`
			${O("div",` ${o("class")}=${k("w=6 absolute")}`,`
				${O("svg",` ${o("classs")}=${k("f=#88888888")}`,`
					${O("use",` ${o("xlink")}:${o("xlink")}=${k(`${w("{")}base${w("}")}/icons.svg#refresh`)}`,!1)}
				`)}
			`)}
			${O("button",` ${o("class")}=${k(`absolute fs=1.5 bold
					ts=0_0_.5_#fff @dark@ts=0_0_.5_#000`)} ${b("on")}:${U("click")}=${l("{")}${E("load_contents")}${l("}")}`,`
				server error
			`)}
		`)}
	${l("{")}/${b("if")}${l("}")}
`)}`,t=`

${b("import")} ${l("{")} ${o("writable")}, ${b("type")} ${o("Writable")} ${l("}")} ${b("from")} ${k("svelte/store")}

${b("export")} ${w("const")} ${o("contents$",!0)}: ${U("Writable")}${l("<")}${l("{",1)} ${o("title")}: ${U("string")}, ${o("content")}: ${U("string")} ${l("}[]",1)}${l(")")} = ${E("writable")}${l("(")}${l("[]",1)}${l(")")}`,s=`

${b("export default")} ${l("{")}
	${o("scrollbar:")} ${l("{",1)}
		${o("primary:")} ${k("::-webkit-scrollbar/w=.5 ::-webkit-scrollbar-track/bg=--primary-70 ::-webkit-scrollbar-thumb/bg=--primary-50;br=.25")}
	${l("}",1)}
${l("}")}`;return[e,t,s]}class Je extends $e{constructor(e){super(),re(this,e,Ge,Fe,le,{})}}function be(f,e,t){const s=f.slice();return s[4]=e[t],s}function Ke(f){let e=f[4].title+"",t;return{c(){t=Y(e)},l(s){t=Z(s,e)},m(s,$){_(s,t,$)},p(s,$){$&2&&e!==(e=s[4].title+"")&&ye(t,e)},d(s){s&&m(t)}}}function we(f){let e,t,s,$,r=f[4].content+"",a,n;return t=new ce({props:{$$slots:{default:[Ke]},$$scope:{ctx:f}}}),{c(){e=y("div"),M(t.$$.fragment),s=S(),$=y("span"),a=Y(r)},l(u){e=I(u,"DIV",{});var p=V(e);P(t.$$.fragment,p),s=j(p),$=I(p,"SPAN",{});var d=V($);a=Z(d,r),d.forEach(m),p.forEach(m)},m(u,p){_(u,e,p),A(t,e,null),L(e,s),L(e,$),L($,a),n=!0},p(u,p){const d={};p&130&&(d.$$scope={dirty:p,ctx:u}),t.$set(d),(!n||p&2)&&r!==(r=u[4].content+"")&&ye(a,r)},i(u){n||(C(t.$$.fragment,u),n=!0)},o(u){D(t.$$.fragment,u),n=!1},d(u){u&&m(e),N(t)}}}function Qe(f){let e,t,s=`<svg class="f=#88888888!"><use xlink:href="${Be}/icons.svg#refresh"></use></svg>`,$,r,a="server error",n,u;return{c(){e=y("div"),t=y("div"),t.innerHTML=s,$=S(),r=y("button"),r.textContent=a,this.h()},l(p){e=I(p,"DIV",{class:!0});var d=V(e);t=I(d,"DIV",{class:!0,"data-svelte-h":!0}),ie(t)!=="svelte-gpt80t"&&(t.innerHTML=s),$=j(d),r=I(d,"BUTTON",{class:!0,"data-svelte-h":!0}),ie(r)!=="svelte-tiar2q"&&(r.textContent=a),d.forEach(m),this.h()},h(){x(t,"class","w=6 absolute"),x(r,"class","absolute fs=1.5 bold ts=0_0_.5_#fff @dark@ts=0_0_.5_#000"),x(e,"class","relative flex h=6.5 jc=center ai=center")},m(p,d){_(p,e,d),L(e,t),L(e,$),L(e,r),n||(u=He(r,"click",f[2]),n=!0)},p:G,i:G,o:G,d(p){p&&m(e),n=!1,u()}}}function Xe(f){let e,t,s;return t=new Pe({}),{c(){e=y("div"),M(t.$$.fragment),this.h()},l($){e=I($,"DIV",{class:!0});var r=V(e);P(t.$$.fragment,r),r.forEach(m),this.h()},h(){x(e,"class","flex h=6.5 jc=center")},m($,r){_($,e,r),A(t,e,null),s=!0},p:G,i($){s||(C(t.$$.fragment,$),s=!0)},o($){D(t.$$.fragment,$),s=!1},d($){$&&m(e),N(t)}}}function Ye(f){let e,t,s,$,r,a=ve(f[1]),n=[];for(let i=0;i<a.length;i+=1)n[i]=we(be(f,a,i));const u=i=>D(n[i],1,1,()=>{n[i]=null}),p=[Xe,Qe],d=[];function c(i,h){return i[0]?i[0]===2?1:-1:0}return~(t=c(f))&&(s=d[t]=p[t](f)),{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=S(),s&&s.c(),$=R()},l(i){for(let h=0;h<n.length;h+=1)n[h].l(i);e=j(i),s&&s.l(i),$=R()},m(i,h){for(let T=0;T<n.length;T+=1)n[T]&&n[T].m(i,h);_(i,e,h),~t&&d[t].m(i,h),_(i,$,h),r=!0},p(i,h){if(h&2){a=ve(i[1]);let g;for(g=0;g<a.length;g+=1){const W=be(i,a,g);n[g]?(n[g].p(W,h),C(n[g],1)):(n[g]=we(W),n[g].c(),C(n[g],1),n[g].m(e.parentNode,e))}for(he(),g=a.length;g<n.length;g+=1)u(g);ge()}let T=t;t=c(i),t===T?~t&&d[t].p(i,h):(s&&(he(),D(d[T],1,1,()=>{d[T]=null}),ge()),~t?(s=d[t],s?s.p(i,h):(s=d[t]=p[t](i),s.c()),C(s,1),s.m($.parentNode,$)):s=null)},i(i){if(!r){for(let h=0;h<a.length;h+=1)C(n[h]);C(s),r=!0}},o(i){n=n.filter(Boolean);for(let h=0;h<n.length;h+=1)D(n[h]);D(s),r=!1},d(i){i&&(m(e),m($)),Te(n,i),~t&&d[t].d(i)}}}function Ze(f){let e,t,s,$,r;return e=new qe({props:{classs:"bd=1px_solid_black xh=15 p=1 "+fe.scrollbar.primary,onlast:f[2],ready:f[0]===1,$$slots:{default:[Ye]},$$scope:{ctx:f}}}),$=new Je({}),{c(){M(e.$$.fragment),t=S(),s=y("div"),M($.$$.fragment)},l(a){P(e.$$.fragment,a),t=j(a),s=I(a,"DIV",{});var n=V(s);P($.$$.fragment,n),n.forEach(m)},m(a,n){A(e,a,n),_(a,t,n),_(a,s,n),A($,s,null),r=!0},p(a,n){const u={};n&1&&(u.ready=a[0]===1),n&131&&(u.$$scope={dirty:n,ctx:a}),e.$set(u)},i(a){r||(C(e.$$.fragment,a),C($.$$.fragment,a),r=!0)},o(a){D(e.$$.fragment,a),D($.$$.fragment,a),r=!1},d(a){a&&(m(t),m(s)),N(e,a),N($)}}}function et(f){let e,t;return e=new Ae({props:{$$slots:{default:[Ze]},$$scope:{ctx:f}}}),{c(){M(e.$$.fragment)},l(s){P(e.$$.fragment,s)},m(s,$){A(e,s,$),t=!0},p(s,[$]){const r={};$&131&&(r.$$scope={dirty:$,ctx:s}),e.$set(r)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){D(e.$$.fragment,s),t=!1},d(s){N(e,s)}}}function tt(f,e,t){let s;Se(f,ne,n=>t(1,s=n));let $=1;const r=(n,u)=>new Promise((p,d)=>setTimeout(()=>{const c=Math.random();if(n&&c<.3)d(`error: ${c} < 0.3`);else{const i=[];for(;u-- >0;)i.push({title:"title "+ ++n,content:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."});p(i)}},n?600:0)),a=()=>{$&&(t(0,$=0),r(s.length,5).then(n=>{ae(ne,s=s.concat(n),s),t(0,$=1)}).catch(()=>t(0,$=2)))};return ue(()=>r(0,10).then(n=>ae(ne,s=n,s))),je(()=>ae(ne,s=[],s)),[$,s,a]}class st extends $e{constructor(e){super(),re(this,e,tt,et,le,{})}}function nt(f){let e;return{c(){e=Y("Infinite Scroll")},l(t){e=Z(t,"Infinite Scroll")},m(t,s){_(t,e,s)},d(t){t&&m(e)}}}function lt(f){let e;return{c(){e=Y(".")},l(t){e=Z(t,".")},m(t,s){_(t,e,s)},d(t){t&&m(e)}}}function $t(f){let e,t,s,$,r,a,n,u,p,d,c,i,h="Lube UI may be released someday",T,g,W,z,J,F,ee,K,te;return d=new ce({props:{$$slots:{default:[nt]},$$scope:{ctx:f}}}),g=new ce({props:{classs:"v=hidden",$$slots:{default:[lt]},$$scope:{ctx:f}}}),F=new st({}),{c(){e=S(),t=y("header"),s=y("div"),$=y("div"),r=y("div"),a=S(),n=y("div"),u=y("div"),p=S(),M(d.$$.fragment),c=S(),i=y("span"),i.textContent=h,T=S(),M(g.$$.fragment),W=S(),z=y("div"),J=y("article"),M(F.$$.fragment),ee=S(),K=y("div"),this.h()},l(v){Me("svelte-1ia2nll",document.head).forEach(m),e=j(v),t=I(v,"HEADER",{class:!0});var Q=V(t);s=I(Q,"DIV",{class:!0});var X=V(s);$=I(X,"DIV",{class:!0});var se=V($);r=I(se,"DIV",{class:!0}),V(r).forEach(m),a=j(se),n=I(se,"DIV",{class:!0});var q=V(n);u=I(q,"DIV",{class:!0}),V(u).forEach(m),p=j(q),P(d.$$.fragment,q),c=j(q),i=I(q,"SPAN",{"data-svelte-h":!0}),ie(i)!=="svelte-cpphmj"&&(i.textContent=h),T=j(q),P(g.$$.fragment,q),q.forEach(m),se.forEach(m),X.forEach(m),Q.forEach(m),W=j(v),z=I(v,"DIV",{class:!0});var pe=V(z);J=I(pe,"ARTICLE",{class:!0});var _e=V(J);P(F.$$.fragment,_e),_e.forEach(m),pe.forEach(m),ee=j(v),K=I(v,"DIV",{class:!0}),V(K).forEach(m),this.h()},h(){document.title="Infinite Scroll - CSS Lube",x(r,"class","w=3"),x(u,"class","h=2"),x(n,"class","fg=1 fsk=1"),x($,"class","flex w=100% "+fe.$common.background_conic),x(s,"class","flex br=1.5 o=hidden "+fe.$common.background_grid),x(t,"class","m=.5"),x(J,"class","m=2_1 @md@m=2"),x(z,"class","m=.5"),x(K,"class","h=2")},m(v,B){_(v,e,B),_(v,t,B),L(t,s),L(s,$),L($,r),L($,a),L($,n),L(n,u),L(n,p),A(d,n,null),L(n,c),L(n,i),L(n,T),A(g,n,null),f[1](t),_(v,W,B),_(v,z,B),L(z,J),A(F,J,null),_(v,ee,B),_(v,K,B),te=!0},p(v,[B]){const Q={};B&4&&(Q.$$scope={dirty:B,ctx:v}),d.$set(Q);const X={};B&4&&(X.$$scope={dirty:B,ctx:v}),g.$set(X)},i(v){te||(C(d.$$.fragment,v),C(g.$$.fragment,v),C(F.$$.fragment,v),te=!0)},o(v){D(d.$$.fragment,v),D(g.$$.fragment,v),D(F.$$.fragment,v),te=!1},d(v){v&&(m(e),m(t),m(W),m(z),m(ee),m(K)),N(d),N(g),f[1](null),N(F)}}}function rt(f,e,t){let s;ue(()=>{var r;return(r=s.parentElement)==null?void 0:r.scroll(0,0)});function $(r){ke[r?"unshift":"push"](()=>{s=r,t(0,s)})}return[s,$]}class ht extends $e{constructor(e){super(),re(this,e,rt,$t,le,{})}}export{ht as component};
