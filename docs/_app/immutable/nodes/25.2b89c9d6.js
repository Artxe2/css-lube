import{S as K,i as Q,s as X,k as R,_ as te,l as z,m as T,$ as se,h as g,n as D,b as C,H as E,D as U,G as pe,I as he,J as _e,K as ge,g as I,d as L,o as ue,j as ve,w as be,y as q,z as B,A as x,B as N,E as ye,F as ne,L as we,a as P,c as S,e as W,v as ae,f as ie,M as ke,P as re,Q as $e,q as Y,r as Z,u as me,C as Ie,R as Ce}from"../chunks/index.d48826db.js";import{H as Ee}from"../chunks/H1.06da29b9.js";import{f as J}from"../chunks/store.705ebed0.js";import{L as Le}from"../chunks/LoadingCircle.e04a017e.js";import{s as De}from"../chunks/index.7782a414.js";import{h as M,k as _,e as n,n as a,s as b,d as k,j,c as Te,f as y,t as G}from"../chunks/highlighter.71dae262.js";import{C as Ve}from"../chunks/ComponentTabView.c380843f.js";import{C as le}from"../chunks/CodePage.d79d6b32.js";import{I as de}from"../chunks/IdeTypescript.1ea86e25.js";const je=i=>{let t,s,e,l,o;i=i.promise||i;let $=0,r,f=0,v=0,m,h=0,c=0;const p=(w,H,O,F)=>{(async A=>!f||h<f?(f&&(h++,setTimeout(()=>{h--,m=null},v)),m=i(...A)):e?m:Promise.reject({code:429,message:"Too many requests"}))(w).then(A=>{$&&(r=A,setTimeout(()=>r=null,$)),s=null,H(A)}).catch(A=>{F<c?p(w,H,O,F+1):(s=null,O(A))})};let d=0,u;const V={promise:async(...w)=>{if(r)return r;let H,O;return t=new Promise((F,A)=>{H=F,O=A}),s?o?H(s):O({code:102,message:"Async request already in progress"}):((F,A,ee)=>{if(d){const oe=t;u=t,setTimeout(async()=>{u!==oe?l?A(u):ee({code:409,message:"Async request be debounced"}):(u=null,s=oe,p(F,A,ee,0))},d)}else s=t,p(F,A,ee,0)})(w,H,O),t},allow:(...w)=>(e=w.includes(429),l=w.includes(409),o=w.includes(102),V),cache:w=>($=w,V),debounce:w=>(d=w,V),retries:w=>(c=w,V),throttle:(w,H)=>(f=w,v=H,V)};return V};function Ae(i){let t,s,e,l;return{c(){t=R("div"),s=te("svg"),e=te("path"),l=te("path"),this.h()},l(o){t=z(o,"DIV",{class:!0});var $=T(t);s=se($,"svg",{xmlns:!0,viewBox:!0});var r=T(s);e=se(r,"path",{d:!0}),T(e).forEach(g),l=se(r,"path",{d:!0,fill:!0}),T(l).forEach(g),r.forEach(g),$.forEach(g),this.h()},h(){D(e,"d","M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"),D(l,"d","M0 0h24v24H0z"),D(l,"fill","none"),D(s,"xmlns","http://www.w3.org/2000/svg"),D(s,"viewBox","0 0 24 24"),D(t,"class",i[0])},m(o,$){C(o,t,$),E(t,s),E(s,e),E(s,l)},p(o,[$]){$&1&&D(t,"class",o[0])},i:U,o:U,d(o){o&&g(t)}}}function He(i,t,s){let{classs:e=""}=t;return i.$$set=l=>{"classs"in l&&s(0,e=l.classs)},[e]}class Me extends K{constructor(t){super(),Q(this,t,He,Ae,X,{classs:0})}}function Pe(i){let t,s,e;const l=i[5].default,o=pe(l,i,i[4],null);return{c(){t=R("div"),o&&o.c(),this.h()},l($){t=z($,"DIV",{class:!0});var r=T(t);o&&o.l(r),r.forEach(g),this.h()},h(){D(t,"class",s="o=auto "+i[0])},m($,r){C($,t,r),o&&o.m(t,null),i[6](t),e=!0},p($,[r]){o&&o.p&&(!e||r&16)&&he(o,l,$,$[4],e?ge(l,$[4],r,null):_e($[4]),null),(!e||r&1&&s!==(s="o=auto "+$[0]))&&D(t,"class",s)},i($){e||(I(o,$),e=!0)},o($){L(o,$),e=!1},d($){$&&g(t),o&&o.d($),i[6](null)}}}function Se(i,t,s){let{$$slots:e={},$$scope:l}=t,{classs:o=""}=t,{ready:$}=t,{onlast:r}=t,f,v;ue(()=>{v=new IntersectionObserver(h=>{h[0].isIntersecting&&(v.unobserve(h[0].target),r())},{root:f,threshold:0})}),ve(()=>{$&&f.lastElementChild&&v.observe(f.lastElementChild)});function m(h){be[h?"unshift":"push"](()=>{f=h,s(1,f)})}return i.$$set=h=>{"classs"in h&&s(0,o=h.classs),"ready"in h&&s(2,$=h.ready),"onlast"in h&&s(3,r=h.onlast),"$$scope"in h&&s(4,l=h.$$scope)},[o,f,$,r,l,e,m]}class qe extends K{constructor(t){super(),Q(this,t,Se,Pe,X,{classs:0,ready:2,onlast:3})}}function ce(i,t,s){const e=i.slice();return e[7]=t[s],e}function Be(i){let t=i[7].title+"",s;return{c(){s=Y(t)},l(e){s=Z(e,t)},m(e,l){C(e,s,l)},p(e,l){l&2&&t!==(t=e[7].title+"")&&me(s,t)},d(e){e&&g(s)}}}function fe(i){let t,s,e,l,o=i[7].content+"",$,r;return s=new Ee({props:{$$slots:{default:[Be]},$$scope:{ctx:i}}}),{c(){t=R("div"),q(s.$$.fragment),e=P(),l=R("span"),$=Y(o)},l(f){t=z(f,"DIV",{});var v=T(t);B(s.$$.fragment,v),e=S(v),l=z(v,"SPAN",{});var m=T(l);$=Z(m,o),m.forEach(g),v.forEach(g)},m(f,v){C(f,t,v),x(s,t,null),E(t,e),E(t,l),E(l,$),r=!0},p(f,v){const m={};v&1026&&(m.$$scope={dirty:v,ctx:f}),s.$set(m),(!r||v&2)&&o!==(o=f[7].content+"")&&me($,o)},i(f){r||(I(s.$$.fragment,f),r=!0)},o(f){L(s.$$.fragment,f),r=!1},d(f){f&&g(t),N(s)}}}function xe(i){let t,s,e,l,o,$,r,f,v;return e=new Me({props:{classs:"f=--gray-88"}}),{c(){t=R("div"),s=R("div"),q(e.$$.fragment),l=P(),o=R("button"),$=Y("server error"),this.h()},l(m){t=z(m,"DIV",{class:!0});var h=T(t);s=z(h,"DIV",{class:!0});var c=T(s);B(e.$$.fragment,c),c.forEach(g),l=S(h),o=z(h,"BUTTON",{class:!0});var p=T(o);$=Z(p,"server error"),p.forEach(g),h.forEach(g),this.h()},h(){D(s,"class","w=6 absolute"),D(o,"class","absolute fs=1.5 bold"),D(t,"class","relative flex h=6.5 jc=center ai=center")},m(m,h){C(m,t,h),E(t,s),x(e,s,null),E(t,l),E(t,o),E(o,$),r=!0,f||(v=Ie(o,"click",i[5]),f=!0)},p:U,i(m){r||(I(e.$$.fragment,m),r=!0)},o(m){L(e.$$.fragment,m),r=!1},d(m){m&&g(t),N(e),f=!1,v()}}}function Ne(i){let t,s,e;return s=new Le({}),{c(){t=R("div"),q(s.$$.fragment),this.h()},l(l){t=z(l,"DIV",{class:!0});var o=T(t);B(s.$$.fragment,o),o.forEach(g),this.h()},h(){D(t,"class","flex h=6.5 jc=center")},m(l,o){C(l,t,o),x(s,t,null),e=!0},p:U,i(l){e||(I(s.$$.fragment,l),e=!0)},o(l){L(s.$$.fragment,l),e=!1},d(l){l&&g(t),N(s)}}}function Re(i){let t,s,e,l,o,$=i[1],r=[];for(let c=0;c<$.length;c+=1)r[c]=fe(ce(i,$,c));const f=c=>L(r[c],1,1,()=>{r[c]=null}),v=[Ne,xe],m=[];function h(c,p){return c[0]?c[0]===2?1:-1:0}return~(s=h(i))&&(e=m[s]=v[s](i)),{c(){for(let c=0;c<r.length;c+=1)r[c].c();t=P(),e&&e.c(),l=W()},l(c){for(let p=0;p<r.length;p+=1)r[p].l(c);t=S(c),e&&e.l(c),l=W()},m(c,p){for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(c,p);C(c,t,p),~s&&m[s].m(c,p),C(c,l,p),o=!0},p(c,p){if(p&2){$=c[1];let u;for(u=0;u<$.length;u+=1){const V=ce(c,$,u);r[u]?(r[u].p(V,p),I(r[u],1)):(r[u]=fe(V),r[u].c(),I(r[u],1),r[u].m(t.parentNode,t))}for(ae(),u=$.length;u<r.length;u+=1)f(u);ie()}let d=s;s=h(c),s===d?~s&&m[s].p(c,p):(e&&(ae(),L(m[d],1,1,()=>{m[d]=null}),ie()),~s?(e=m[s],e?e.p(c,p):(e=m[s]=v[s](c),e.c()),I(e,1),e.m(l.parentNode,l)):e=null)},i(c){if(!o){for(let p=0;p<$.length;p+=1)I(r[p]);I(e),o=!0}},o(c){r=r.filter(Boolean);for(let p=0;p<r.length;p+=1)L(r[p]);L(e),o=!1},d(c){ke(r,c),c&&g(t),~s&&m[s].d(c),c&&g(l)}}}function ze(i){let t,s;return{c(){t=new re(!1),s=W(),this.h()},l(e){t=$e(e,!1),s=W(),this.h()},h(){t.a=s},m(e,l){t.m(i[2],e,l),C(e,s,l)},p:U,d(e){e&&g(s),e&&t.d()}}}function Oe(i){let t,s,e,l,o;return t=new de({props:{name:"store"}}),{c(){q(t.$$.fragment),s=P(),e=new re(!1),l=W(),this.h()},l($){B(t.$$.fragment,$),s=S($),e=$e($,!1),l=W(),this.h()},h(){e.a=l},m($,r){x(t,$,r),C($,s,r),e.m(i[3],$,r),C($,l,r),o=!0},p:U,i($){o||(I(t.$$.fragment,$),o=!0)},o($){L(t.$$.fragment,$),o=!1},d($){N(t,$),$&&g(s),$&&g(l),$&&e.d()}}}function Ue(i){let t,s,e,l,o,$;return s=new de({props:{name:"index"}}),{c(){t=Y("styles / "),q(s.$$.fragment),e=P(),l=new re(!1),o=W(),this.h()},l(r){t=Z(r,"styles / "),B(s.$$.fragment,r),e=S(r),l=$e(r,!1),o=W(),this.h()},h(){l.a=o},m(r,f){C(r,t,f),x(s,r,f),C(r,e,f),l.m(i[4],r,f),C(r,o,f),$=!0},p:U,i(r){$||(I(s.$$.fragment,r),$=!0)},o(r){L(s.$$.fragment,r),$=!1},d(r){r&&g(t),N(s,r),r&&g(e),r&&g(o),r&&l.d()}}}function We(i){let t,s,e,l,o,$,r,f,v,m,h,c,p;return t=new qe({props:{classs:"bd=1px_solid_black xh=15 "+De.scrollbar.primary,onlast:i[5],ready:i[0]===1,$$slots:{default:[Re]},$$scope:{ctx:i}}}),l=new le({props:{isCode:!0,$$slots:{default:[ze]},$$scope:{ctx:i}}}),f=new le({props:{isCode:!0,$$slots:{default:[Oe]},$$scope:{ctx:i}}}),c=new le({props:{isCode:!0,$$slots:{default:[Ue]},$$scope:{ctx:i}}}),{c(){q(t.$$.fragment),s=P(),e=R("div"),q(l.$$.fragment),o=P(),$=R("div"),r=P(),q(f.$$.fragment),v=P(),m=R("div"),h=P(),q(c.$$.fragment),this.h()},l(d){B(t.$$.fragment,d),s=S(d),e=z(d,"DIV",{});var u=T(e);B(l.$$.fragment,u),o=S(u),$=z(u,"DIV",{class:!0}),T($).forEach(g),r=S(u),B(f.$$.fragment,u),v=S(u),m=z(u,"DIV",{class:!0}),T(m).forEach(g),h=S(u),B(c.$$.fragment,u),u.forEach(g),this.h()},h(){D($,"class","h=1"),D(m,"class","h=1")},m(d,u){x(t,d,u),C(d,s,u),C(d,e,u),x(l,e,null),E(e,o),E(e,$),E(e,r),x(f,e,null),E(e,v),E(e,m),E(e,h),x(c,e,null),p=!0},p(d,u){const V={};u&1&&(V.ready=d[0]===1),u&1027&&(V.$$scope={dirty:u,ctx:d}),t.$set(V);const w={};u&1024&&(w.$$scope={dirty:u,ctx:d}),l.$set(w);const H={};u&1024&&(H.$$scope={dirty:u,ctx:d}),f.$set(H);const O={};u&1024&&(O.$$scope={dirty:u,ctx:d}),c.$set(O)},i(d){p||(I(t.$$.fragment,d),I(l.$$.fragment,d),I(f.$$.fragment,d),I(c.$$.fragment,d),p=!0)},o(d){L(t.$$.fragment,d),L(l.$$.fragment,d),L(f.$$.fragment,d),L(c.$$.fragment,d),p=!1},d(d){N(t,d),d&&g(s),d&&g(e),N(l),N(f),N(c)}}}function Fe(i){let t,s;return t=new Ve({props:{$$slots:{default:[We]},$$scope:{ctx:i}}}),{c(){q(t.$$.fragment)},l(e){B(t.$$.fragment,e)},m(e,l){x(t,e,l),s=!0},p(e,[l]){const o={};l&1027&&(o.$$scope={dirty:l,ctx:e}),t.$set(o)},i(e){s||(I(t.$$.fragment,e),s=!0)},o(e){L(t.$$.fragment,e),s=!1},d(e){N(t,e)}}}function Ge(i,t,s){let e;ye(i,J,m=>s(1,e=m));const l=`${M("script",` ${a("lang")}=${b("ts")}`,`
${_("import")} ${n("{")} ${a("builder")} ${n("}")} ${_("from")} ${b("async-sugar")}
${_("import")} ${a("H1")} ${_("from")} ${b("cells/typography/H1.svelte")}
${_("import")} ${a("InfiniteScroll")} ${_("from")} ${b("organs/@common/utils/InfiniteScroll.svelte")}
${_("import")} ${a("IRefresh")} ${_("from")} ${b("cells/svgs/i_refresh.svelte")}
${_("import")} ${a("LoadingCircle")} ${_("from")} ${b("src/instant-ui/animations/LoadingCircle.svelte")}
${_("import")} ${a("styles")} ${_("from")} ${b("src/styles")}
${_("import")} ${n("{")} ${a("contents$")} ${n("}")} ${_("from")} ${b("parts/ref/store")}
${_("import")} ${n("{")} ${a("onDestroy")}, ${a("onMount")} ${n("}")} ${_("from")} ${b("svelte")}

${k("let")} ${a("loading")} = ${j(1)} ${Te("// 0: in progress, 1: none, 2: error")}
${k("const")} ${a("loremApi",!0)} = ${y("builder")}${n("(")}${n("(",1)}${a("i")}: ${G("number")}, ${a("n")}: ${G("number")}${n(")",1)} ${k("=>")} ${k("new")} ${G("Promise")}${n("(",1)}${n("(",2)}${y("resolve")}, ${y("reject")}${n(")",2)}${n(")",1)} ${k("=>")} ${y("setTimeout")}${n("(",2)}${n("()")} ${k("=>")} ${n("{")}
	${k("const")} ${a("r",!0)} = ${a("Math")}.${y("random")}${n("()",1)}
	${_("if")} ${n("(",1)}${a("i")} && ${a("r",!0)} < ${j(.3)}${n(") {",1)}
		${y("reject")}${n("(",2)}${b("`error:",!1)} ${k("${")}${a("r",!0)}${k("}")} ${b("< 0.3`",!1)}${n(")",2)}
	${n("}",1)} ${_("else")} ${n("{",1)}
		${k("const")} ${a("contents",!0)} = ${n("[]",2)}
		${_("while")} ${n("(",2)}${a("n")}-- > ${j(0)}${n(") {",2)}
			${a("contents",!0)}.${y("push")}${n("(")}${n("{",1)} ${a("title:")} ${b("title ")} + ++${a("i")}, ${a("content:")} ${b("Lorem Ipsum is . . . . . . of Lorem Ipsum.")} ${n("}",1)}${n(")")}
		${n("}",2)}
		${y("resolve")}${n("(",2)}${a("contents",!0)}${n(")",2)}
	${n("}",1)}
${n("}")}, ${a("i")} ? ${j(600)} : ${j(0)}${n(")",2)}${n(")",1)}${n(")")}
${k("const")} ${y("loadContents")} = ${n("()")} ${k("=>")} ${n("{")}
	${_("if")} ${n("(",1)}${a("loading")}${n(") {",1)}
		${a("loading")} = ${j(0)}
		${a("loremApi",!0)}.${y("promise")}${n("(",2)}${a("$contents$")}.${a("length")}, ${j(5)}${n(")",2)}
			.${y("set")}${n("(",2)}${a("value")} ${k("=>")} ${n("{")}
				${a("$contents$")} = ${a("$contents$")}.${y("concat")}${n("(",1)}${a("value")}${n(")",1)}
				${a("loading")} = ${j(1)}
			${n("}")}${n(")",2)}
			.${y("catch")}${n("(",2)}${n("()")} ${k("=>")} ${a("loading")} = ${j(2)}${n(")",2)}
	${n("}",1)}
${n("}")}
${y("onMount")}${n("(")}${n("()",1)} ${k("=>")} ${a("loremApi",!0)}.${y("promise")}${n("(",1)}${j(0)}, ${j(10)}${n(")",1)}.${y("then")}${n("(",1)}${a("value")} ${k("=>")} ${a("$contents$")} = ${a("value")}${n(")",1)}${n(")")}
${y("onDestroy")}${n("(")}${n("()",1)} ${k("=>")} ${a("$contents$")} = ${n("[]",1)}${n(")")}
`)}

${M("InfiniteScroll",` ${a("classs")}=${b('"bd=1px_solid_black xh=15',!1)} ${n("{",2)}${a("styles")}.${a("scrollbar")}.${a("primary")}${n("}",2)}${b('"',!1)}
		${a("onlast")}=${n("{")}${y("loadContents")}${n("}")}
		${a("ready")}=${n("{")}${a("loading")} === ${j(1)}${n("}")}`,`
	${n("{")}#${_("each")} ${a("$contents$")} ${_("as")} ${a("c")}${n("}")}
		${M("div","",`
			${M("H1","",`${n("{")}${a("c")}.${a("title")}${n("}")}`)}
			${M("span","",`${n("{")}${a("c")}.${a("content")}${n("}")}`)}
		`)}
	${n("{")}/${_("each")}${n("}")}
	${n("{")}#${_("if")} !${a("loading")}${n("}")}
		${M("div",` ${a("class")}=${b("flex h=6.5 jc=center")}`,`
			${M("LoadingCircle","",!1)}
		`)}
	${n("{")}:${_("else if")} ${a("loading")} === ${j(2)}${n("}")}
		${M("div",` ${a("class")}=${b("relative flex h=6.5 jc=center ai=center")}`,`
			${M("div",` ${a("class")}=${b("w=6 absolute")}`,`
				${M("IRefresh",` ${a("classs")}=${b("f=--gray-88")}`,!1)}
			`)}
			${M("button",` ${a("class")}=${b("absolute fs=1.5 bold")} ${_("on")}:${G("click")}=${n("{")}${y("loadContents")}${n("}")}`,"server error")}
		`)}
	${n("{")}/${_("if")}${n("}")}
`)}`,o=`

${_("import")} ${n("{")} ${a("writable")}, ${_("type")} ${a("Writable")} ${n("}")} ${_("from")} ${b("svelte/store")}

${_("export")} ${k("const")} ${a("contents$",!0)}: ${G("Writable")}${n("<")}${n("{",1)} ${a("title")}: ${G("string")}, ${a("content")}: ${G("string")} ${n("}[]",1)}${n(")")} = ${y("writable")}${n("(")}${n("[]",1)}${n(")")}`,$=`

${_("export default")} ${n("{")}
	${a("scrollbar:")} ${n("{",1)}
		${a("primary:")} ${b("::-webkit-scrollbar/w=.5 ::-webkit-scrollbar-track/bg=--chambray-55 ::-webkit-scrollbar-thumb/bg=--chambray;br=.25")}
	${n("}",1)}
${n("}")}`;let r=1;const f=je((m,h)=>new Promise((c,p)=>setTimeout(()=>{const d=Math.random();if(m&&d<.3)p(`error: ${d} < 0.3`);else{const u=[];for(;h-- >0;)u.push({title:"title "+ ++m,content:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."});c(u)}},m?600:0))),v=()=>{r&&(s(0,r=0),f.promise(e.length,5).then(m=>{ne(J,e=e.concat(m),e),s(0,r=1)}).catch(()=>s(0,r=2)))};return ue(()=>f.promise(0,10).then(m=>ne(J,e=m,e))),we(()=>ne(J,e=[],e)),[r,e,l,o,$,v]}class Je extends K{constructor(t){super(),Q(this,t,Ge,Fe,X,{})}}function Ke(i){let t,s,e;return s=new Je({}),{c(){t=P(),q(s.$$.fragment),this.h()},l(l){Ce("svelte-120ri7c",document.head).forEach(g),t=S(l),B(s.$$.fragment,l),this.h()},h(){document.title="Infinite Scroll | Reference"},m(l,o){C(l,t,o),x(s,l,o),e=!0},p:U,i(l){e||(I(s.$$.fragment,l),e=!0)},o(l){L(s.$$.fragment,l),e=!1},d(l){l&&g(t),N(s,l)}}}class rt extends K{constructor(t){super(),Q(this,t,null,Ke,X,{})}}export{rt as component};
